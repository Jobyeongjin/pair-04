{% extends 'base.html' %}

{% block content %}
  {% include 'navbar.html' %}

  <div class="container review-content">
    <!-- Index-Nav -->
    <div class="index-nav d-flex flex-column">
      <ul class="index-icon">
        <li>
          <a href="{% url 'movies:index' %}">
            <i class="fa-solid fa-house fa-2x"></i>
            <span class="index-text">홈</span>
          </a>
          </li>
        <li>
          <a href="{% url 'accounts:profile' user.pk %}">
            <i class="fa-regular fa-user fa-2x"></i>
            <span class="index-text">프로필</span>
          </a>
        </li>
        <li>
          <a href="{% url 'review:index' movie.pk %}">
            <i class="fa-regular fa-comment-dots fa-2x"></i>
            <span class="index-text">댓글</span>
          </a>
        </li>
        <li>
          <a href="#">
            <div class="dot-wrap">
              <i class="fa-regular fa-bell fa-2x"></i>
              <div class="dot"></div>
            </div>
            <span class="index-text">알림</span>
          </a>
        </li>
      </ul>
      <a href="{% url 'review:create' movie.id %}">
        <button class="index-btn">리뷰작성</button>
      </a>
    </div>

    <!-- Index-Content -->
    <div class="index-content">

      {% for review in reviews %}

        <div class="card-top px-3">
          <div class="card-profile d-flex flex-column">
            <div class="mb-2">
              <img src="{{ review.user.profile.image.url }}" alt="" width="55px" height="55px" class="rounded-circle flex-shrink-0 mx-2">
              {{ review.user }}
            </div>
            <div class="badge bg-info">
              {{ review.get_date}}
            </div>
          </div>
          <i class="fa-solid fa-ellipsis fa-lg"></i>
        </div>
        <a href="{% url 'review:detail' movie.id review.pk %}">
          <p class="my-3 px-3">{{ review.title }}</p>
          {% if review.image %}
            <div class="card-img mt-3 px-3">
              <img src="{{ review.image.url }}" alt="" width="100%" height="100%" style="border-radius: 20px;">
            </div>
          {% endif %}
        </a>
        <div class="card-icon d-flex justify-content-around align-items-center">
          <i class="fa-regular fa-comment fa-lg">
            {{ review.comment_set.all|length }}
          </i>
          <i class="fa-regular fa-heart fa-lg">
            {{ review.like_users.all|length }}
          </i>
          <i class="fa-solid fa-cloud-arrow-down fa-lg"></i>
        </div>

        <hr>
      {% endfor %}

    </div>

    <!-- Index-Foryou -->
    <div class="index-foryou"></div>
  </div>

{% endblock content %}